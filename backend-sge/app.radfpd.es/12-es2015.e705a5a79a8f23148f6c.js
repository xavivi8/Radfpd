(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{MpFz:function(i,t,e){"use strict";e.r(t),e.d(t,"CiclosModule",(function(){return X}));var o=e("ofXK"),c=e("tyNb"),a=e("mrSG"),n=e("M9IT"),l=e("+0xr"),r=e("Dh3D"),s=e("3Pt+"),d=e("Xksa"),b=e("fXoL"),m=e("0IaG"),u=e("dNgK"),f=e("KafX"),h=e("dnsR"),v=e("y0zT"),p=e("kmnG"),C=e("qFsG"),g=e("d3UM"),S=e("bTqV"),R=e("FKr1");function N(i,t){if(1&i&&(b.Sb(0,"mat-option",14),b.Cc(1),b.Rb()),2&i){const i=t.$implicit;b.jc("value",i.id_nivel),b.Bb(1),b.Ec(" ",i.nivel," ")}}function k(i,t){if(1&i&&(b.Sb(0,"mat-option",14),b.Cc(1),b.Rb()),2&i){const i=t.$implicit;b.jc("value",i.id_familia),b.Bb(1),b.Ec(" ",i.familia," ")}}let B=(()=>{class i{constructor(i,t,e,o,c){this.dialogRef=i,this.snackBar=t,this.servicioCiclos=e,this.servicioNiveles=o,this.servicioFamilias=c}ngOnInit(){this.cicloForm=new s.h({ciclo:new s.e(null,s.v.required),cod_ciclo:new s.e(null,s.v.required),id_nivel:new s.e(null,s.v.required),id_familia:new s.e(null,s.v.required),observaciones:new s.e(null)}),this.ENTIDAD=d.c,this.getNiveles(),this.getFamilias()}confirmAdd(){return Object(a.a)(this,void 0,void 0,(function*(){if(this.cicloForm.valid){const i=this.cicloForm.value,t=yield this.servicioCiclos.addCiclo(i).toPromise();t.ok?(this.snackBar.open(t.message,d.a,{duration:5e3}),this.dialogRef.close({ok:t.ok,data:t.data})):this.snackBar.open(t.message,d.a,{duration:5e3})}else this.snackBar.open(d.n,d.a,{duration:5e3})}))}onNoClick(){this.dialogRef.close({ok:!1})}getNiveles(){return Object(a.a)(this,void 0,void 0,(function*(){const i=yield this.servicioNiveles.getAllNiveles().toPromise();i.ok&&(this.niveles=i.data)}))}getFamilias(){return Object(a.a)(this,void 0,void 0,(function*(){const i=yield this.servicioFamilias.getAllFamilias().toPromise();i.ok&&(this.familias=i.data)}))}}return i.\u0275fac=function(t){return new(t||i)(b.Mb(m.f),b.Mb(u.a),b.Mb(f.a),b.Mb(h.a),b.Mb(v.a))},i.\u0275cmp=b.Gb({type:i,selectors:[["app-add-ciclo"]],decls:30,vars:6,consts:[[1,"container"],["mat-dialog-title",""],[1,"mat-dialog-content",3,"formGroup"],[1,"form"],["color","accent"],["matInput","","formControlName","ciclo","name","ciclo","maxlength","100","required","",3,"placeholder"],["matInput","","placeholder","Cod Ciclo","formControlName","cod_ciclo","name","cod_ciclo","maxlength","100","required",""],["formControlName","id_nivel","required",""],[3,"value",4,"ngFor","ngForOf"],["formControlName","id_familia","required",""],["matInput","","placeholder","Observaciones","formControlName","observaciones","name","observaciones"],["mat-dialog-actions",""],["mat-button","","id","onSubmit","type","submit",3,"disabled","click"],["mat-button","","id","onNoClick","tabindex","-1",3,"click"],[3,"value"]],template:function(i,t){1&i&&(b.Sb(0,"div",0),b.Sb(1,"h3",1),b.Cc(2),b.Rb(),b.Sb(3,"form",2),b.Sb(4,"div",3),b.Sb(5,"mat-form-field",4),b.Nb(6,"input",5),b.Rb(),b.Rb(),b.Sb(7,"div",3),b.Sb(8,"mat-form-field",4),b.Nb(9,"input",6),b.Rb(),b.Rb(),b.Sb(10,"div",3),b.Sb(11,"mat-form-field"),b.Sb(12,"mat-label"),b.Cc(13,"Nivel"),b.Rb(),b.Sb(14,"mat-select",7),b.Bc(15,N,2,2,"mat-option",8),b.Rb(),b.Rb(),b.Rb(),b.Sb(16,"div",3),b.Sb(17,"mat-form-field"),b.Sb(18,"mat-label"),b.Cc(19,"Familia Profesional"),b.Rb(),b.Sb(20,"mat-select",9),b.Bc(21,k,2,2,"mat-option",8),b.Rb(),b.Rb(),b.Rb(),b.Sb(22,"div",3),b.Sb(23,"mat-form-field",4),b.Nb(24,"textarea",10),b.Rb(),b.Rb(),b.Sb(25,"div",11),b.Sb(26,"button",12),b.Zb("click",(function(){return t.confirmAdd()})),b.Cc(27,"Guardar"),b.Rb(),b.Sb(28,"button",13),b.Zb("click",(function(){return t.onNoClick()})),b.Cc(29,"Cancelar"),b.Rb(),b.Rb(),b.Rb(),b.Rb()),2&i&&(b.Bb(2),b.Ec("A\xf1adir ",t.ENTIDAD,""),b.Bb(1),b.jc("formGroup",t.cicloForm),b.Bb(3),b.kc("placeholder",t.ENTIDAD),b.Bb(9),b.jc("ngForOf",t.niveles),b.Bb(6),b.jc("ngForOf",t.familias),b.Bb(5),b.jc("disabled",!t.cicloForm.valid))},directives:[m.g,s.w,s.p,s.i,p.c,C.b,s.c,s.o,s.g,s.k,s.u,p.f,g.a,o.k,m.c,S.a,R.n],styles:[".container[_ngcontent-%COMP%]{margin:0 auto;min-width:30em;text-align:center;padding-top:10px}div.mat-dialog-actions[_ngcontent-%COMP%]{width:12em;margin:auto}.radioButton[_ngcontent-%COMP%]{text-align:left;margin-bottom:1em;padding-left:.2em}"]}),i})();function _(i,t){if(1&i&&(b.Sb(0,"mat-option",14),b.Cc(1),b.Rb()),2&i){const i=t.$implicit;b.jc("value",i.id_nivel),b.Bb(1),b.Ec(" ",i.nivel," ")}}function F(i,t){if(1&i&&(b.Sb(0,"mat-option",14),b.Cc(1),b.Rb()),2&i){const i=t.$implicit;b.jc("value",i.id_familia),b.Bb(1),b.Ec(" ",i.familia," ")}}let w=(()=>{class i{constructor(i,t,e,o,c,a){this.dialogRef=i,this.snackBar=t,this.servicioCiclos=e,this.servicioNiveles=o,this.servicioFamilias=c,this.ciclo=a}ngOnInit(){this.ENTIDAD=d.c,this.cicloForm=new s.h({id_ciclo:new s.e(this.ciclo.id_ciclo,s.v.required),ciclo:new s.e(this.ciclo.ciclo,s.v.required),cod_ciclo:new s.e(this.ciclo.cod_ciclo,s.v.required),id_nivel:new s.e(this.ciclo.id_nivel,s.v.required),id_familia:new s.e(this.ciclo.id_familia,s.v.required),observaciones:new s.e(this.ciclo.observaciones)}),this.getNiveles(),this.getFamilias()}confirmEdit(){return Object(a.a)(this,void 0,void 0,(function*(){if(this.cicloForm.valid){const i=this.cicloForm.value,t=yield this.servicioCiclos.editCiclo(i).toPromise();t.ok?(this.snackBar.open(t.message,d.a,{duration:5e3}),this.dialogRef.close({ok:t.ok,data:t.data})):this.snackBar.open(d.m,d.a,{duration:5e3})}else this.snackBar.open(d.m,d.a,{duration:5e3})}))}onNoClick(){this.dialogRef.close({ok:!1})}getNiveles(){return Object(a.a)(this,void 0,void 0,(function*(){const i=yield this.servicioNiveles.getAllNiveles().toPromise();i.ok&&(this.niveles=i.data)}))}getFamilias(){return Object(a.a)(this,void 0,void 0,(function*(){const i=yield this.servicioFamilias.getAllFamilias().toPromise();i.ok&&(this.familias=i.data)}))}}return i.\u0275fac=function(t){return new(t||i)(b.Mb(m.f),b.Mb(u.a),b.Mb(f.a),b.Mb(h.a),b.Mb(v.a),b.Mb(m.a))},i.\u0275cmp=b.Gb({type:i,selectors:[["app-edit-ciclo"]],decls:30,vars:6,consts:[[1,"container"],["mat-dialog-title",""],[1,"mat-dialog-content",3,"formGroup"],[1,"form"],["color","accent"],["matInput","","formControlName","ciclo","name","ciclo","maxlength","100","required","",3,"placeholder"],["matInput","","placeholder","Cod Ciclo","formControlName","cod_ciclo","name","cod_ciclo","maxlength","100","required",""],["formControlName","id_nivel","required",""],[3,"value",4,"ngFor","ngForOf"],["formControlName","id_familia","required",""],["matInput","","placeholder","Observaciones","formControlName","observaciones","name","observaciones"],["mat-dialog-actions",""],["mat-button","","id","onSubmit","type","submit",3,"disabled","click"],["mat-button","","id","onNoClick","tabindex","-1",3,"click"],[3,"value"]],template:function(i,t){1&i&&(b.Sb(0,"div",0),b.Sb(1,"h3",1),b.Cc(2),b.Rb(),b.Sb(3,"form",2),b.Sb(4,"div",3),b.Sb(5,"mat-form-field",4),b.Nb(6,"input",5),b.Rb(),b.Rb(),b.Sb(7,"div",3),b.Sb(8,"mat-form-field",4),b.Nb(9,"input",6),b.Rb(),b.Rb(),b.Sb(10,"div",3),b.Sb(11,"mat-form-field"),b.Sb(12,"mat-label"),b.Cc(13,"Nivel"),b.Rb(),b.Sb(14,"mat-select",7),b.Bc(15,_,2,2,"mat-option",8),b.Rb(),b.Rb(),b.Rb(),b.Sb(16,"div",3),b.Sb(17,"mat-form-field"),b.Sb(18,"mat-label"),b.Cc(19,"Familia Profesional"),b.Rb(),b.Sb(20,"mat-select",9),b.Bc(21,F,2,2,"mat-option",8),b.Rb(),b.Rb(),b.Rb(),b.Sb(22,"div",3),b.Sb(23,"mat-form-field",4),b.Nb(24,"textarea",10),b.Rb(),b.Rb(),b.Sb(25,"div",11),b.Sb(26,"button",12),b.Zb("click",(function(){return t.confirmEdit()})),b.Cc(27,"Guardar"),b.Rb(),b.Sb(28,"button",13),b.Zb("click",(function(){return t.onNoClick()})),b.Cc(29,"Cancelar"),b.Rb(),b.Rb(),b.Rb(),b.Rb()),2&i&&(b.Bb(2),b.Ec("Editar ",t.ENTIDAD,""),b.Bb(1),b.jc("formGroup",t.cicloForm),b.Bb(3),b.kc("placeholder",t.ENTIDAD),b.Bb(9),b.jc("ngForOf",t.niveles),b.Bb(6),b.jc("ngForOf",t.familias),b.Bb(5),b.jc("disabled",!t.cicloForm.valid))},directives:[m.g,s.w,s.p,s.i,p.c,C.b,s.c,s.o,s.g,s.k,s.u,p.f,g.a,o.k,m.c,S.a,R.n],styles:[".container[_ngcontent-%COMP%]{margin:0 auto;min-width:30em;text-align:center;padding-top:10px}div.mat-dialog-actions[_ngcontent-%COMP%]{width:12em;margin:auto}.radioButton[_ngcontent-%COMP%]{text-align:left;margin-bottom:1em;padding-left:.2em}"]}),i})(),O=(()=>{class i{constructor(i,t,e,o){this.dialogRef=i,this.ciclo=t,this.servicioCiclo=e,this.snackBar=o}ngOnInit(){this.ENTIDAD=d.d}onNoClick(){this.dialogRef.close({ok:!1})}confirmDelete(){return Object(a.a)(this,void 0,void 0,(function*(){const i=yield this.servicioCiclo.deleteCiclo(this.ciclo.id_ciclo).toPromise();i.ok?(this.snackBar.open(i.message,d.a,{duration:5e3}),this.dialogRef.close({ok:i.ok,data:i.data})):this.snackBar.open(i.message,d.a,{duration:5e3})}))}}return i.\u0275fac=function(t){return new(t||i)(b.Mb(m.f),b.Mb(m.a),b.Mb(f.a),b.Mb(u.a))},i.\u0275cmp=b.Gb({type:i,selectors:[["app-delete-ciclo"]],decls:13,vars:5,consts:[[1,"container"],["mat-dialog-title",""],["mat-dialog-content",""],["mat-dialog-actions",""],["mat-button","","id","deleteEntidad",3,"click"],["mat-button","","id","onNoClick","tabindex","-1",3,"click"]],template:function(i,t){1&i&&(b.Sb(0,"div",0),b.Sb(1,"h3",1),b.Cc(2),b.Rb(),b.Sb(3,"div",2),b.Cc(4),b.Nb(5,"p"),b.Cc(6),b.Nb(7,"p"),b.Rb(),b.Sb(8,"div",3),b.Sb(9,"button",4),b.Zb("click",(function(){return t.confirmDelete()})),b.Cc(10),b.Rb(),b.Sb(11,"button",5),b.Zb("click",(function(){return t.onNoClick()})),b.Cc(12,"Cancelar"),b.Rb(),b.Rb(),b.Rb()),2&i&&(b.Bb(2),b.Ec("\xbfSeguro que deseas eliminar este ",t.ENTIDAD,"?"),b.Bb(2),b.Ec(" Id: ",t.ciclo.id_ciclo," "),b.Bb(2),b.Fc(" ",t.ENTIDAD,": ",t.ciclo.ciclo," "),b.Bb(4),b.Ec("Eliminar ",t.ENTIDAD,""))},directives:[m.g,m.d,m.c,S.a],styles:[""]}),i})();var y=e("rDax"),D=e("NFeN");function j(i,t){if(1&i&&(b.Sb(0,"th",15),b.Nb(1,"input",16),b.Nb(2,"span",17),b.Rb()),2&i){const i=b.dc();b.Bb(1),b.jc("formControl",i.idCicloFilter)}}function I(i,t){if(1&i&&(b.Sb(0,"td",18),b.Cc(1),b.Rb()),2&i){const i=t.$implicit;b.Bb(1),b.Ec(" ",i.id_ciclo," ")}}function E(i,t){if(1&i&&(b.Sb(0,"th",15),b.Nb(1,"input",19),b.Nb(2,"span",17),b.Rb()),2&i){const i=b.dc();b.Bb(1),b.jc("formControl",i.cicloFilter)}}function M(i,t){if(1&i&&(b.Sb(0,"td",18),b.Cc(1),b.Rb()),2&i){const i=t.$implicit;b.Bb(1),b.Ec(" ",i.ciclo," ")}}function P(i,t){if(1&i&&(b.Sb(0,"th",15),b.Nb(1,"input",20),b.Nb(2,"span",17),b.Rb()),2&i){const i=b.dc();b.Bb(1),b.jc("formControl",i.codCicloFilter)}}function x(i,t){if(1&i&&(b.Sb(0,"td",18),b.Cc(1),b.Rb()),2&i){const i=t.$implicit;b.Bb(1),b.Ec(" ",i.cod_ciclo," ")}}function q(i,t){if(1&i&&(b.Sb(0,"th",15),b.Nb(1,"input",21),b.Nb(2,"span",17),b.Rb()),2&i){const i=b.dc();b.Bb(1),b.jc("formControl",i.idNivelFilter)}}function A(i,t){if(1&i&&(b.Sb(0,"td",18),b.Cc(1),b.Rb()),2&i){const i=t.$implicit;b.Bb(1),b.Ec(" ",i.fk_nivel," ")}}function G(i,t){if(1&i&&(b.Sb(0,"th",15),b.Nb(1,"input",22),b.Nb(2,"span",17),b.Rb()),2&i){const i=b.dc();b.Bb(1),b.jc("formControl",i.idFamiliaFilter)}}function T(i,t){if(1&i&&(b.Sb(0,"td",18),b.Cc(1),b.Rb()),2&i){const i=t.$implicit;b.Bb(1),b.Ec(" ",i.fk_familia," ")}}function V(i,t){if(1&i){const i=b.Tb();b.Sb(0,"th",15),b.Sb(1,"button",23),b.Zb("click",(function(){return b.tc(i),b.dc().addCiclo()})),b.Sb(2,"mat-icon"),b.Cc(3," add_circle "),b.Rb(),b.Rb(),b.Rb()}}function $(i,t){if(1&i){const i=b.Tb();b.Sb(0,"td",18),b.Sb(1,"button",23),b.Zb("click",(function(){b.tc(i);const e=t.$implicit;return b.dc().editCiclo(e)})),b.Sb(2,"mat-icon"),b.Cc(3," mode_edit "),b.Rb(),b.Rb(),b.Sb(4,"button",23),b.Zb("click",(function(){b.tc(i);const e=t.$implicit;return b.dc().deleteCiclo(e)})),b.Sb(5,"mat-icon"),b.Cc(6," delete "),b.Rb(),b.Rb(),b.Rb()}}function J(i,t){1&i&&b.Nb(0,"tr",24)}function L(i,t){1&i&&b.Nb(0,"tr",25)}const Z=function(){return[5,10,25]},z=[{path:"",component:(()=>{class i{constructor(i,t,e){this.dialog=i,this.ciclosService=t,this.overlay=e,this.dataSource=new l.k,this.idCicloFilter=new s.e,this.cicloFilter=new s.e,this.codCicloFilter=new s.e,this.idNivelFilter=new s.e,this.idFamiliaFilter=new s.e,this.filterValues={id_ciclo:"",ciclo:"",cod_ciclo:"",id_nivel:"",id_familia:""}}ngOnInit(){this.getCiclos()}getCiclos(){return Object(a.a)(this,void 0,void 0,(function*(){const i=yield this.ciclosService.getAllCiclos().toPromise();this.permises=i.permises,i.ok&&(this.ciclosService.ciclo=i.data,this.displayedColumns=["id_ciclo","ciclo","cod_ciclo","id_nivel","id_familia","actions"],this.dataSource.data=this.ciclosService.ciclo,this.dataSource.sort=this.sort,this.dataSource.paginator=this.paginator,this.dataSource.filterPredicate=this.createFilter(),this.onChanges())}))}addCiclo(){return Object(a.a)(this,void 0,void 0,(function*(){const i=this.dialog.open(B,{scrollStrategy:this.overlay.scrollStrategies.noop()}),t=yield i.afterClosed().toPromise();t&&t.ok&&this.ngOnInit()}))}editCiclo(i){return Object(a.a)(this,void 0,void 0,(function*(){const t=this.dialog.open(w,{data:i,scrollStrategy:this.overlay.scrollStrategies.noop()}),e=yield t.afterClosed().toPromise();e&&e.ok&&this.ngOnInit()}))}deleteCiclo(i){return Object(a.a)(this,void 0,void 0,(function*(){const t=this.dialog.open(O,{data:i,scrollStrategy:this.overlay.scrollStrategies.noop()}),e=yield t.afterClosed().toPromise();e&&e.ok&&this.ngOnInit()}))}createFilter(){return(i,t)=>{const e=JSON.parse(t);return-1!==i.id_ciclo.toString().indexOf(e.id_ciclo)&&-1!==i.ciclo.toLowerCase().indexOf(e.ciclo.toLowerCase())&&-1!==i.cod_ciclo.toLowerCase().indexOf(e.cod_ciclo.toLowerCase())&&-1!==i.fk_nivel.toLowerCase().indexOf(e.id_nivel.toLowerCase())&&-1!==i.fk_familia.toLowerCase().indexOf(e.id_familia.toLowerCase())}}onChanges(){this.idCicloFilter.valueChanges.subscribe(i=>{this.filterValues.id_ciclo=i,this.dataSource.filter=JSON.stringify(this.filterValues)}),this.cicloFilter.valueChanges.subscribe(i=>{this.filterValues.ciclo=i,this.dataSource.filter=JSON.stringify(this.filterValues)}),this.codCicloFilter.valueChanges.subscribe(i=>{this.filterValues.cod_ciclo=i,this.dataSource.filter=JSON.stringify(this.filterValues)}),this.idNivelFilter.valueChanges.subscribe(i=>{this.filterValues.id_nivel=i,this.dataSource.filter=JSON.stringify(this.filterValues)}),this.idFamiliaFilter.valueChanges.subscribe(i=>{this.filterValues.id_familia=i,this.dataSource.filter=JSON.stringify(this.filterValues)})}}return i.\u0275fac=function(t){return new(t||i)(b.Mb(m.b),b.Mb(f.a),b.Mb(y.c))},i.\u0275cmp=b.Gb({type:i,selectors:[["app-ciclos"]],viewQuery:function(i,t){var e;1&i&&(b.xc(n.a,!0),b.xc(r.a,!0)),2&i&&(b.pc(e=b.ac())&&(t.paginator=e.first),b.pc(e=b.ac())&&(t.sort=e.first))},decls:25,vars:6,consts:[[1,"example-container","mat-elevation-z8"],[1,"example-table-container"],["mat-table","","matSort","",1,"mat-elevation-z8",3,"dataSource"],["matColumnDef","id_ciclo"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","ciclo"],["matColumnDef","cod_ciclo"],["matColumnDef","id_nivel"],["matColumnDef","id_familia"],["matColumnDef","actions"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],[3,"pageSize","pageSizeOptions"],["paginator",""],["mat-header-cell",""],["matInput","","placeholder","Id",3,"formControl"],["mat-sort-header",""],["mat-cell",""],["matInput","","placeholder","Ciclo",3,"formControl"],["matInput","","placeholder","Cod Ciclo",3,"formControl"],["matInput","","placeholder","Nivel",3,"formControl"],["matInput","","placeholder","Familia",3,"formControl"],["mat-icon-button","",3,"click"],["mat-header-row",""],["mat-row",""]],template:function(i,t){1&i&&(b.Sb(0,"div",0),b.Sb(1,"div",1),b.Sb(2,"table",2),b.Qb(3,3),b.Bc(4,j,3,1,"th",4),b.Bc(5,I,2,1,"td",5),b.Pb(),b.Qb(6,6),b.Bc(7,E,3,1,"th",4),b.Bc(8,M,2,1,"td",5),b.Pb(),b.Qb(9,7),b.Bc(10,P,3,1,"th",4),b.Bc(11,x,2,1,"td",5),b.Pb(),b.Qb(12,8),b.Bc(13,q,3,1,"th",4),b.Bc(14,A,2,1,"td",5),b.Pb(),b.Qb(15,9),b.Bc(16,G,3,1,"th",4),b.Bc(17,T,2,1,"td",5),b.Pb(),b.Qb(18,10),b.Bc(19,V,4,0,"th",4),b.Bc(20,$,7,0,"td",5),b.Pb(),b.Bc(21,J,1,0,"tr",11),b.Bc(22,L,1,0,"tr",12),b.Rb(),b.Rb(),b.Nb(23,"mat-paginator",13,14),b.Rb()),2&i&&(b.Bb(2),b.jc("dataSource",t.dataSource),b.Bb(19),b.jc("matHeaderRowDef",t.displayedColumns),b.Bb(1),b.jc("matRowDefColumns",t.displayedColumns),b.Bb(1),b.jc("pageSize",10)("pageSizeOptions",b.mc(5,Z)))},directives:[l.j,r.a,l.c,l.e,l.b,l.g,l.i,n.a,l.d,C.b,s.c,s.o,s.f,r.b,l.a,S.a,D.a,l.f,l.h],styles:[""]}),i})()}];let Q=(()=>{class i{}return i.\u0275mod=b.Kb({type:i}),i.\u0275inj=b.Jb({factory:function(t){return new(t||i)},imports:[[c.f.forChild(z)],c.f]}),i})();var K=e("ah4G");let X=(()=>{class i{}return i.\u0275mod=b.Kb({type:i}),i.\u0275inj=b.Jb({factory:function(t){return new(t||i)},imports:[[o.c,Q,K.a]]}),i})()}}]);