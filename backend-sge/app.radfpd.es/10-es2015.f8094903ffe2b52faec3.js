(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{"1Q09":function(i,t,a){"use strict";a.d(t,"a",(function(){return k}));var o=a("mrSG"),n=a("3Pt+"),e=a("0IaG"),d=a("Xksa"),c=a("fXoL"),l=a("dNgK"),r=a("d/co"),s=a("KafX"),u=a("92VL"),b=a("+hd0"),m=a("kmnG"),f=a("d3UM"),h=a("FKr1"),p=a("ofXK"),v=a("qFsG"),g=a("bTqV");function C(i,t){if(1&i&&(c.Sb(0,"mat-option",16),c.Cc(1),c.Rb()),2&i){const i=t.$implicit;c.jc("value",i.id_ciclo),c.Bb(1),c.Ec(" ",i.ciclo," ")}}function S(i,t){if(1&i&&(c.Sb(0,"mat-option",16),c.Cc(1),c.Rb()),2&i){const i=t.$implicit;c.jc("value",i.id_unidad_dual),c.Bb(1),c.Ec(" ",i.unidad_dual," ")}}function _(i,t){if(1&i&&(c.Sb(0,"mat-option",16),c.Cc(1),c.Rb()),2&i){const i=t.$implicit;c.jc("value",i.id_motivo_nodual),c.Bb(1),c.Ec(" ",i.motivo_nodual," ")}}function R(i,t){if(1&i&&(c.Sb(0,"div",3),c.Sb(1,"mat-form-field"),c.Sb(2,"mat-label"),c.Cc(3,"Motivo no Dual"),c.Rb(),c.Sb(4,"mat-select",17),c.Sb(5,"mat-option",5),c.Cc(6,"Sin motivo no Dual"),c.Rb(),c.Bc(7,_,2,2,"mat-option",6),c.Rb(),c.Rb(),c.Rb()),2&i){const i=c.dc();c.Bb(7),c.jc("ngForOf",i.motivos_nodual)}}let k=(()=>{class i{constructor(i,t,a,o,n,e,d){this.dialogRef=i,this.snackBar=t,this.servicioUnidades=a,this.servicioCiclos=o,this.servicioUnidadesDual=n,this.servicioMotivosNodual=e,this.idEntidad=d,this.esDual=!0}ngOnInit(){this.unidadForm=new n.h({id_entidad:new n.e(this.idEntidad,n.v.required),id_ciclo:new n.e(null,n.v.required),unidad:new n.e(null,n.v.required),plazas:new n.e(null,n.v.required),id_unidad_dual:new n.e(null,n.v.required),id_motivo_nodual:new n.e(null),observaciones:new n.e(null)}),this.ENTIDAD=d.k,this.getCiclos(),this.getUnidadesDual(),this.getMotivosNodual(this.idEntidad)}confirmAdd(){return Object(o.a)(this,void 0,void 0,(function*(){if(this.unidadForm.valid){const i=this.unidadForm.value,t=yield this.servicioUnidades.addUnidad(i).toPromise();t.ok?(this.snackBar.open(t.message,d.a,{duration:5e3}),this.dialogRef.close({ok:t.ok,data:t.data})):this.snackBar.open(t.message,d.a,{duration:5e3})}else this.snackBar.open(d.n,d.a,{duration:5e3})}))}getCiclos(){return Object(o.a)(this,void 0,void 0,(function*(){const i=yield this.servicioCiclos.getAllCiclos().toPromise();i.ok&&(this.ciclos=i.data)}))}getUnidadesDual(){return Object(o.a)(this,void 0,void 0,(function*(){const i=yield this.servicioUnidadesDual.getAllUnidadesDual().toPromise();i.ok&&(this.unidades_dual=i.data)}))}getMotivosNodual(i){return Object(o.a)(this,void 0,void 0,(function*(){const t=yield this.servicioMotivosNodual.get(i).toPromise();t.ok&&(this.motivos_nodual=t.data)}))}onNoClick(){this.dialogRef.close({ok:!1})}unidadDual(i){return Object(o.a)(this,void 0,void 0,(function*(){this.esDual=i>1,console.log(this.esDual)}))}}return i.\u0275fac=function(t){return new(t||i)(c.Mb(e.f),c.Mb(l.a),c.Mb(r.a),c.Mb(s.a),c.Mb(u.a),c.Mb(b.a),c.Mb(e.a))},i.\u0275cmp=c.Gb({type:i,selectors:[["app-add-unidad"]],decls:33,vars:6,consts:[[1,"container"],["mat-dialog-title",""],[1,"mat-dialog-content",3,"formGroup"],[1,"form"],["formControlName","id_ciclo","required",""],["value",""],[3,"value",4,"ngFor","ngForOf"],["color","accent"],["matInput","","placeholder","Unidad","formControlName","unidad","name","unidad","maxlength","100","required",""],["matInput","","placeholder","Plazas","formControlName","plazas","name","plazas","maxlength","100","required",""],["formControlName","id_unidad_dual","required","",3,"valueChange"],["class","form",4,"ngIf"],["matInput","","placeholder","Observaciones","formControlName","observaciones","name","Observaciones"],["mat-dialog-actions",""],["mat-button","","id","onSubmit","type","submit",3,"disabled","click"],["mat-button","","id","onNoClick","tabindex","-1",3,"click"],[3,"value"],["formControlName","id_motivo_nodual"]],template:function(i,t){1&i&&(c.Sb(0,"div",0),c.Sb(1,"h3",1),c.Cc(2),c.Rb(),c.Sb(3,"form",2),c.Sb(4,"div",3),c.Sb(5,"mat-form-field"),c.Sb(6,"mat-label"),c.Cc(7,"Ciclo"),c.Rb(),c.Sb(8,"mat-select",4),c.Sb(9,"mat-option",5),c.Cc(10,"Sin ciclo"),c.Rb(),c.Bc(11,C,2,2,"mat-option",6),c.Rb(),c.Rb(),c.Rb(),c.Sb(12,"div",3),c.Sb(13,"mat-form-field",7),c.Nb(14,"input",8),c.Rb(),c.Rb(),c.Sb(15,"div",3),c.Sb(16,"mat-form-field",7),c.Nb(17,"input",9),c.Rb(),c.Rb(),c.Sb(18,"div",3),c.Sb(19,"mat-form-field"),c.Sb(20,"mat-label"),c.Cc(21,"\xbfUnidad Dual?"),c.Rb(),c.Sb(22,"mat-select",10),c.Zb("valueChange",(function(i){return t.unidadDual(i)})),c.Bc(23,S,2,2,"mat-option",6),c.Rb(),c.Rb(),c.Rb(),c.Bc(24,R,8,1,"div",11),c.Sb(25,"div",3),c.Sb(26,"mat-form-field",7),c.Nb(27,"textarea",12),c.Rb(),c.Rb(),c.Sb(28,"div",13),c.Sb(29,"button",14),c.Zb("click",(function(){return t.confirmAdd()})),c.Cc(30,"Guardar"),c.Rb(),c.Sb(31,"button",15),c.Zb("click",(function(){return t.onNoClick()})),c.Cc(32,"Cancelar"),c.Rb(),c.Rb(),c.Rb(),c.Rb()),2&i&&(c.Bb(2),c.Ec("Nuevo ",t.ENTIDAD,""),c.Bb(1),c.jc("formGroup",t.unidadForm),c.Bb(8),c.jc("ngForOf",t.ciclos),c.Bb(12),c.jc("ngForOf",t.unidades_dual),c.Bb(1),c.jc("ngIf",!t.esDual),c.Bb(5),c.jc("disabled",!t.unidadForm.valid))},directives:[e.g,n.w,n.p,n.i,m.c,m.f,f.a,n.o,n.g,n.u,h.n,p.k,v.b,n.c,n.k,p.l,e.c,g.a],styles:[".container[_ngcontent-%COMP%]{margin:0 auto;min-width:30em;text-align:center;padding-top:10px}div.mat-dialog-actions[_ngcontent-%COMP%]{width:12em;margin:auto}.radioButton[_ngcontent-%COMP%]{text-align:left;margin-bottom:1em;padding-left:.2em}"]}),i})()},GUrN:function(i,t,a){"use strict";a.d(t,"a",(function(){return s}));var o=a("mrSG"),n=a("0IaG"),e=a("Xksa"),d=a("fXoL"),c=a("d/co"),l=a("dNgK"),r=a("bTqV");let s=(()=>{class i{constructor(i,t,a,o){this.dialogRef=i,this.unidad=t,this.servicioUnidad=a,this.snackBar=o}ngOnInit(){this.ENTIDAD=e.d}onNoClick(){this.dialogRef.close({ok:!1})}confirmDelete(){return Object(o.a)(this,void 0,void 0,(function*(){const i=yield this.servicioUnidad.deleteUnidad(this.unidad.id_unidad).toPromise();i.ok?(this.snackBar.open(i.message,e.a,{duration:5e3}),this.dialogRef.close({ok:i.ok,data:i.data})):this.snackBar.open(i.message,e.a,{duration:5e3})}))}}return i.\u0275fac=function(t){return new(t||i)(d.Mb(n.f),d.Mb(n.a),d.Mb(c.a),d.Mb(l.a))},i.\u0275cmp=d.Gb({type:i,selectors:[["app-delete-unidad"]],decls:13,vars:5,consts:[[1,"container"],["mat-dialog-title",""],["mat-dialog-content",""],["mat-dialog-actions",""],["mat-button","","id","deleteEntidad",3,"click"],["mat-button","","id","onNoClick","tabindex","-1",3,"click"]],template:function(i,t){1&i&&(d.Sb(0,"div",0),d.Sb(1,"h3",1),d.Cc(2),d.Rb(),d.Sb(3,"div",2),d.Cc(4),d.Nb(5,"p"),d.Cc(6),d.Nb(7,"p"),d.Rb(),d.Sb(8,"div",3),d.Sb(9,"button",4),d.Zb("click",(function(){return t.confirmDelete()})),d.Cc(10),d.Rb(),d.Sb(11,"button",5),d.Zb("click",(function(){return t.onNoClick()})),d.Cc(12,"Cancelar"),d.Rb(),d.Rb(),d.Rb()),2&i&&(d.Bb(2),d.Ec("\xbfSeguro que deseas eliminar este ",t.ENTIDAD,"?"),d.Bb(2),d.Ec(" Id: ",t.unidad.id_unidad," "),d.Bb(2),d.Fc(" ",t.ENTIDAD,": ",t.unidad.unidad," "),d.Bb(4),d.Ec("Eliminar ",t.ENTIDAD,""))},directives:[n.g,n.d,n.c,r.a],styles:[""]}),i})()},"Hw+l":function(i,t,a){"use strict";a.r(t),a.d(t,"UnidadesModule",(function(){return V}));var o=a("ofXK"),n=a("tyNb"),e=a("mrSG"),d=a("M9IT"),c=a("+0xr"),l=a("Dh3D"),r=a("3Pt+"),s=a("1Q09"),u=a("fHkp"),b=a("GUrN"),m=a("fXoL"),f=a("0IaG"),h=a("d/co"),p=a("rDax"),v=a("DrcZ"),g=a("qFsG"),C=a("bTqV"),S=a("NFeN");function _(i,t){if(1&i&&(m.Sb(0,"th",18),m.Nb(1,"input",19),m.Nb(2,"span",20),m.Rb()),2&i){const i=m.dc();m.Bb(1),m.jc("formControl",i.idUnidadFilter)}}function R(i,t){if(1&i&&(m.Sb(0,"td",21),m.Cc(1),m.Rb()),2&i){const i=t.$implicit;m.Bb(1),m.Ec(" ",i.id_unidad," ")}}function k(i,t){if(1&i&&(m.Sb(0,"th",18),m.Nb(1,"input",22),m.Nb(2,"span",20),m.Rb()),2&i){const i=m.dc();m.Bb(1),m.jc("formControl",i.idCicloFilter)}}function w(i,t){if(1&i&&(m.Sb(0,"td",21),m.Cc(1),m.Rb()),2&i){const i=t.$implicit;m.Bb(1),m.Ec(" ",i.fk_ciclo,"")}}function N(i,t){if(1&i&&(m.Sb(0,"th",18),m.Nb(1,"input",23),m.Nb(2,"span",20),m.Rb()),2&i){const i=m.dc();m.Bb(1),m.jc("formControl",i.unidadFilter)}}function B(i,t){if(1&i&&(m.Sb(0,"td",21),m.Cc(1),m.Rb()),2&i){const i=t.$implicit;m.Bb(1),m.Ec(" ",i.unidad,"")}}function D(i,t){if(1&i&&(m.Sb(0,"th",18),m.Nb(1,"input",24),m.Nb(2,"span",20),m.Rb()),2&i){const i=m.dc();m.Bb(1),m.jc("formControl",i.plazasFilter)}}function O(i,t){if(1&i&&(m.Sb(0,"td",21),m.Cc(1),m.Rb()),2&i){const i=t.$implicit;m.Bb(1),m.Ec(" ",i.plazas,"")}}function M(i,t){if(1&i&&(m.Sb(0,"th",18),m.Nb(1,"input",25),m.Nb(2,"span",20),m.Rb()),2&i){const i=m.dc();m.Bb(1),m.jc("formControl",i.idUnidadDualFilter)}}function F(i,t){if(1&i&&(m.Sb(0,"td",21),m.Cc(1),m.Rb()),2&i){const i=t.$implicit;m.Bb(1),m.Ec(" ",i.fk_unidad_dual,"")}}function U(i,t){if(1&i&&(m.Sb(0,"th",18),m.Nb(1,"input",26),m.Nb(2,"span",20),m.Rb()),2&i){const i=m.dc();m.Bb(1),m.jc("formControl",i.idMotivoNodualFilter)}}function j(i,t){if(1&i&&(m.Sb(0,"td",21),m.Cc(1),m.Rb()),2&i){const i=t.$implicit;m.Bb(1),m.Ec(" ",i.fk_motivo_nodual,"")}}function y(i,t){if(1&i){const i=m.Tb();m.Sb(0,"th",18),m.Sb(1,"button",27),m.Zb("click",(function(){m.tc(i);const t=m.dc();return t.addUnidad(t.entidad.id_entidad)})),m.Sb(2,"mat-icon"),m.Cc(3," add_circle "),m.Rb(),m.Rb(),m.Rb()}}function P(i,t){if(1&i){const i=m.Tb();m.Sb(0,"td",21),m.Sb(1,"button",27),m.Zb("click",(function(){m.tc(i);const a=t.$implicit;return m.dc().editUnidad(a)})),m.Sb(2,"mat-icon"),m.Cc(3," mode_edit "),m.Rb(),m.Rb(),m.Sb(4,"button",27),m.Zb("click",(function(){m.tc(i);const a=t.$implicit;return m.dc().deleteUnidad(a)})),m.Sb(5,"mat-icon"),m.Cc(6," delete "),m.Rb(),m.Rb(),m.Rb()}}function I(i,t){1&i&&m.Nb(0,"tr",28)}function E(i,t){1&i&&m.Nb(0,"tr",29)}const x=function(){return[5,10,25]},q=[{path:"",component:(()=>{class i{constructor(i,t,a,o){this.dialog=i,this.unidadesService=t,this.overlay=a,this.entidadService=o,this.dataSource=new c.k,this.idUnidadFilter=new r.e,this.idCicloFilter=new r.e,this.unidadFilter=new r.e,this.plazasFilter=new r.e,this.idUnidadDualFilter=new r.e,this.idMotivoNodualFilter=new r.e,this.filterValues={id_unidad:"",id_ciclo:"",unidad:"",plazas:"",id_unidad_dual:"",id_motivo_nodual:""}}ngOnInit(){this.entidad=this.entidadService.entidad,this.getUnidades(this.entidad)}getUnidades(i){return Object(e.a)(this,void 0,void 0,(function*(){const t=yield this.unidadesService.getUnidades(i.id_entidad).toPromise();this.permises=t.permises,t.ok&&(this.unidadesService.unidad=t.data,this.displayedColumns=["id_ciclo","unidad","plazas","id_unidad_dual","id_motivo_nodual","actions"],this.dataSource.data=this.unidadesService.unidad,this.dataSource.sort=this.sort,this.dataSource.paginator=this.paginator,this.dataSource.filterPredicate=this.createFilter(),this.onChanges())}))}addUnidad(i){return Object(e.a)(this,void 0,void 0,(function*(){const t=this.dialog.open(s.a,{data:i,scrollStrategy:this.overlay.scrollStrategies.noop()}),a=yield t.afterClosed().toPromise();a&&a.ok&&this.ngOnInit()}))}editUnidad(i){return Object(e.a)(this,void 0,void 0,(function*(){const t=this.dialog.open(u.a,{data:i,scrollStrategy:this.overlay.scrollStrategies.noop()}),a=yield t.afterClosed().toPromise();a&&a.ok&&this.ngOnInit()}))}deleteUnidad(i){return Object(e.a)(this,void 0,void 0,(function*(){const t=this.dialog.open(b.a,{data:i,scrollStrategy:this.overlay.scrollStrategies.noop()}),a=yield t.afterClosed().toPromise();a&&a.ok&&this.ngOnInit()}))}createFilter(){return(i,t)=>{const a=JSON.parse(t);return-1!==i.id_unidad.toString().indexOf(a.id_unidad)&&-1!==i.fk_ciclo.toLowerCase().indexOf(a.fk_ciclo.toLowerCase())&&-1!==i.unidad.toLowerCase().indexOf(a.unidad.toLowerCase())&&-1!==i.plazas.toString().indexOf(a.plazas.toLowerCase())&&-1!==i.fk_unidad_dual.toLowerCase().indexOf(a.fk_unidad_dual.toLowerCase())&&-1!==i.fk_motivo_nodual.toLowerCase().indexOf(a.fk_motivo_nodual.toLowerCase())}}onChanges(){this.idUnidadFilter.valueChanges.subscribe(i=>{this.filterValues.id_unidad=i,this.dataSource.filter=JSON.stringify(this.filterValues)}),this.idCicloFilter.valueChanges.subscribe(i=>{this.filterValues.id_ciclo=i,this.dataSource.filter=JSON.stringify(this.filterValues)}),this.unidadFilter.valueChanges.subscribe(i=>{this.filterValues.unidad=i,this.dataSource.filter=JSON.stringify(this.filterValues)}),this.plazasFilter.valueChanges.subscribe(i=>{this.filterValues.plazas=i,this.dataSource.filter=JSON.stringify(this.filterValues)}),this.idUnidadDualFilter.valueChanges.subscribe(i=>{this.filterValues.id_unidad_dual=i,this.dataSource.filter=JSON.stringify(this.filterValues)}),this.idMotivoNodualFilter.valueChanges.subscribe(i=>{this.filterValues.id_motivo_nodual=i,this.dataSource.filter=JSON.stringify(this.filterValues)})}}return i.\u0275fac=function(t){return new(t||i)(m.Mb(f.b),m.Mb(h.a),m.Mb(p.c),m.Mb(v.a))},i.\u0275cmp=m.Gb({type:i,selectors:[["app-unidades"]],viewQuery:function(i,t){var a;1&i&&(m.xc(d.a,!0),m.xc(l.a,!0)),2&i&&(m.pc(a=m.ac())&&(t.paginator=a.first),m.pc(a=m.ac())&&(t.sort=a.first))},decls:31,vars:7,consts:[[1,"container"],["mat-dialog-title",""],[1,"example-container","mat-elevation-z8"],[1,"example-table-container"],["mat-table","","matSort","",1,"mat-elevation-z8",3,"dataSource"],["matColumnDef","id_unidad"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","id_ciclo"],["matColumnDef","unidad"],["matColumnDef","plazas"],["matColumnDef","id_unidad_dual"],["matColumnDef","id_motivo_nodual"],["matColumnDef","actions"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],[3,"pageSize","pageSizeOptions"],["paginator",""],["mat-header-cell",""],["matInput","","placeholder","Id",3,"formControl"],["mat-sort-header",""],["mat-cell",""],["matInput","","placeholder","Ciclo",3,"formControl"],["matInput","","placeholder","Unidad",3,"formControl"],["matInput","","placeholder","Plazas",3,"formControl"],["matInput","","placeholder","Dual?",3,"formControl"],["matInput","","placeholder","Motivo no Dual",3,"formControl"],["mat-icon-button","",3,"click"],["mat-header-row",""],["mat-row",""]],template:function(i,t){1&i&&(m.Sb(0,"div",0),m.Sb(1,"h3",1),m.Cc(2),m.Rb(),m.Sb(3,"div",2),m.Sb(4,"div",3),m.Sb(5,"table",4),m.Qb(6,5),m.Bc(7,_,3,1,"th",6),m.Bc(8,R,2,1,"td",7),m.Pb(),m.Qb(9,8),m.Bc(10,k,3,1,"th",6),m.Bc(11,w,2,1,"td",7),m.Pb(),m.Qb(12,9),m.Bc(13,N,3,1,"th",6),m.Bc(14,B,2,1,"td",7),m.Pb(),m.Qb(15,10),m.Bc(16,D,3,1,"th",6),m.Bc(17,O,2,1,"td",7),m.Pb(),m.Qb(18,11),m.Bc(19,M,3,1,"th",6),m.Bc(20,F,2,1,"td",7),m.Pb(),m.Qb(21,12),m.Bc(22,U,3,1,"th",6),m.Bc(23,j,2,1,"td",7),m.Pb(),m.Qb(24,13),m.Bc(25,y,4,0,"th",6),m.Bc(26,P,7,0,"td",7),m.Pb(),m.Bc(27,I,1,0,"tr",14),m.Bc(28,E,1,0,"tr",15),m.Rb(),m.Rb(),m.Nb(29,"mat-paginator",16,17),m.Rb(),m.Rb()),2&i&&(m.Bb(2),m.Ec("Ciclos de ",t.entidad.entidad,""),m.Bb(3),m.jc("dataSource",t.dataSource),m.Bb(22),m.jc("matHeaderRowDef",t.displayedColumns),m.Bb(1),m.jc("matRowDefColumns",t.displayedColumns),m.Bb(1),m.jc("pageSize",10)("pageSizeOptions",m.mc(6,x)))},directives:[f.g,c.j,l.a,c.c,c.e,c.b,c.g,c.i,d.a,c.d,g.b,r.c,r.o,r.f,l.b,c.a,C.a,S.a,c.f,c.h],styles:[".container[_ngcontent-%COMP%]{padding-bottom:10em}.mat-dialog-content[_ngcontent-%COMP%]{margin-left:5%}.mat-dialog-title[_ngcontent-%COMP%]{text-align:center}.mat-dialog-actions[_ngcontent-%COMP%]{display:block;text-align:center}.mat-column-id_ciclo[_ngcontent-%COMP%]{width:35%!important;padding-right:1em!important;word-wrap:break-word!important}.mat-column-plazas[_ngcontent-%COMP%], .mat-column-unidad[_ngcontent-%COMP%]{width:10%!important;padding-right:4em!important;word-wrap:break-word!important}.mat-column-id_unidad_dual[_ngcontent-%COMP%]{width:5%!important;padding-right:4em!important;word-wrap:break-word!important}.mat-column-id_motivo_nodual[_ngcontent-%COMP%]{width:25%!important;padding-right:1em!important;word-wrap:break-word!important}.mat-column-actions[_ngcontent-%COMP%]{width:2em!important;padding-right:0!important;word-wrap:break-word!important}"]}),i})()},{path:"add-unidad",loadChildren:()=>a.e(18).then(a.bind(null,"Ux96")).then(i=>i.AddUnidadModule)},{path:"edit-unidad",loadChildren:()=>a.e(20).then(a.bind(null,"o+td")).then(i=>i.EditUnidadModule)},{path:"delete-unidad",loadChildren:()=>a.e(19).then(a.bind(null,"DOvP")).then(i=>i.DeleteUnidadModule)}];let z=(()=>{class i{}return i.\u0275mod=m.Kb({type:i}),i.\u0275inj=m.Jb({factory:function(t){return new(t||i)},imports:[[n.f.forChild(q)],n.f]}),i})();var G=a("ah4G");let V=(()=>{class i{}return i.\u0275mod=m.Kb({type:i}),i.\u0275inj=m.Jb({factory:function(t){return new(t||i)},imports:[[o.c,z,G.a]]}),i})()},fHkp:function(i,t,a){"use strict";a.d(t,"a",(function(){return k}));var o=a("mrSG"),n=a("3Pt+"),e=a("0IaG"),d=a("Xksa"),c=a("fXoL"),l=a("dNgK"),r=a("d/co"),s=a("KafX"),u=a("92VL"),b=a("+hd0"),m=a("kmnG"),f=a("d3UM"),h=a("FKr1"),p=a("ofXK"),v=a("qFsG"),g=a("bTqV");function C(i,t){if(1&i&&(c.Sb(0,"mat-option",16),c.Cc(1),c.Rb()),2&i){const i=t.$implicit;c.jc("value",i.id_ciclo),c.Bb(1),c.Ec(" ",i.ciclo," ")}}function S(i,t){if(1&i&&(c.Sb(0,"mat-option",16),c.Cc(1),c.Rb()),2&i){const i=t.$implicit;c.jc("value",i.id_unidad_dual),c.Bb(1),c.Ec(" ",i.unidad_dual," ")}}function _(i,t){if(1&i&&(c.Sb(0,"mat-option",16),c.Cc(1),c.Rb()),2&i){const i=t.$implicit;c.jc("value",i.id_motivo_nodual),c.Bb(1),c.Ec(" ",i.motivo_nodual," ")}}function R(i,t){if(1&i&&(c.Sb(0,"div",3),c.Sb(1,"mat-form-field"),c.Sb(2,"mat-label"),c.Cc(3,"Motivo no Dual"),c.Rb(),c.Sb(4,"mat-select",17),c.Sb(5,"mat-option",5),c.Cc(6,"Sin motivo no Dual"),c.Rb(),c.Bc(7,_,2,2,"mat-option",6),c.Rb(),c.Rb(),c.Rb()),2&i){const i=c.dc();c.Bb(7),c.jc("ngForOf",i.motivos_nodual)}}let k=(()=>{class i{constructor(i,t,a,o,n,e,d){this.dialogRef=i,this.snackBar=t,this.servicioUnidades=a,this.unidad=o,this.servicioCiclos=n,this.servicioUnidadesDual=e,this.servicioMotivosNodual=d,this.esDual=!0}ngOnInit(){this.setForm()}setForm(){this.ENTIDAD=d.k,this.unidadForm=new n.h({id_unidad:new n.e(this.unidad.id_unidad,n.v.required),id_entidad:new n.e(this.unidad.id_entidad,n.v.required),id_ciclo:new n.e(this.unidad.id_ciclo,n.v.required),unidad:new n.e(this.unidad.unidad,n.v.required),plazas:new n.e(this.unidad.plazas,n.v.required),id_unidad_dual:new n.e(this.unidad.id_unidad_dual,n.v.required),id_motivo_nodual:new n.e(this.unidad.id_motivo_nodual),observaciones:new n.e(null)}),this.unidadDual(this.unidad.id_unidad_dual),this.getCiclos(),this.getUnidadesDual(),this.getMotivosNodual(this.unidad.id_entidad)}confirmEdit(){return Object(o.a)(this,void 0,void 0,(function*(){if(console.log(this.unidad),this.unidadForm.valid){const i=this.unidadForm.value,t=yield this.servicioUnidades.editUnidad(i).toPromise();t.ok?(this.snackBar.open(t.message,d.a,{duration:5e3}),this.dialogRef.close({ok:t.ok,data:t.data})):this.snackBar.open(t.message,d.a,{duration:5e3})}else this.snackBar.open(d.m,d.a,{duration:5e3})}))}getCiclos(){return Object(o.a)(this,void 0,void 0,(function*(){const i=yield this.servicioCiclos.getAllCiclos().toPromise();i.ok&&(this.ciclos=i.data)}))}getUnidadesDual(){return Object(o.a)(this,void 0,void 0,(function*(){const i=yield this.servicioUnidadesDual.getAllUnidadesDual().toPromise();i.ok&&(this.unidades_dual=i.data)}))}getMotivosNodual(i){return Object(o.a)(this,void 0,void 0,(function*(){const t=yield this.servicioMotivosNodual.get(i).toPromise();t.ok&&(this.motivos_nodual=t.data)}))}onNoClick(){this.dialogRef.close({ok:!1})}unidadDual(i){return Object(o.a)(this,void 0,void 0,(function*(){this.esDual=i>1,console.log(this.esDual)}))}}return i.\u0275fac=function(t){return new(t||i)(c.Mb(e.f),c.Mb(l.a),c.Mb(r.a),c.Mb(e.a),c.Mb(s.a),c.Mb(u.a),c.Mb(b.a))},i.\u0275cmp=c.Gb({type:i,selectors:[["app-edit-unidad"]],decls:33,vars:6,consts:[[1,"container"],["mat-dialog-title",""],[1,"mat-dialog-content",3,"formGroup"],[1,"form"],["formControlName","id_ciclo","required",""],["value",""],[3,"value",4,"ngFor","ngForOf"],["color","accent"],["matInput","","placeholder","Unidad","formControlName","unidad","name","unidad","maxlength","100","required",""],["matInput","","placeholder","Plazas","formControlName","plazas","name","plazas","maxlength","100","required",""],["formControlName","id_unidad_dual","required","",3,"valueChange"],["class","form",4,"ngIf"],["matInput","","placeholder","Observaciones","formControlName","observaciones","name","Observaciones"],["mat-dialog-actions",""],["mat-button","","id","onSubmit","type","submit",3,"disabled","click"],["mat-button","","id","onNoClick","tabindex","-1",3,"click"],[3,"value"],["formControlName","id_motivo_nodual"]],template:function(i,t){1&i&&(c.Sb(0,"div",0),c.Sb(1,"h3",1),c.Cc(2),c.Rb(),c.Sb(3,"form",2),c.Sb(4,"div",3),c.Sb(5,"mat-form-field"),c.Sb(6,"mat-label"),c.Cc(7,"Ciclo"),c.Rb(),c.Sb(8,"mat-select",4),c.Sb(9,"mat-option",5),c.Cc(10,"Sin ciclo"),c.Rb(),c.Bc(11,C,2,2,"mat-option",6),c.Rb(),c.Rb(),c.Rb(),c.Sb(12,"div",3),c.Sb(13,"mat-form-field",7),c.Nb(14,"input",8),c.Rb(),c.Rb(),c.Sb(15,"div",3),c.Sb(16,"mat-form-field",7),c.Nb(17,"input",9),c.Rb(),c.Rb(),c.Sb(18,"div",3),c.Sb(19,"mat-form-field"),c.Sb(20,"mat-label"),c.Cc(21,"\xbfUnidad Dual?"),c.Rb(),c.Sb(22,"mat-select",10),c.Zb("valueChange",(function(i){return t.unidadDual(i)})),c.Bc(23,S,2,2,"mat-option",6),c.Rb(),c.Rb(),c.Rb(),c.Bc(24,R,8,1,"div",11),c.Sb(25,"div",3),c.Sb(26,"mat-form-field",7),c.Nb(27,"textarea",12),c.Rb(),c.Rb(),c.Sb(28,"div",13),c.Sb(29,"button",14),c.Zb("click",(function(){return t.confirmEdit()})),c.Cc(30,"Guardar"),c.Rb(),c.Sb(31,"button",15),c.Zb("click",(function(){return t.onNoClick()})),c.Cc(32,"Cancelar"),c.Rb(),c.Rb(),c.Rb(),c.Rb()),2&i&&(c.Bb(2),c.Ec("Editar ",t.ENTIDAD,""),c.Bb(1),c.jc("formGroup",t.unidadForm),c.Bb(8),c.jc("ngForOf",t.ciclos),c.Bb(12),c.jc("ngForOf",t.unidades_dual),c.Bb(1),c.jc("ngIf",!t.esDual),c.Bb(5),c.jc("disabled",!t.unidadForm.valid))},directives:[e.g,n.w,n.p,n.i,m.c,m.f,f.a,n.o,n.g,n.u,h.n,p.k,v.b,n.c,n.k,p.l,e.c,g.a],styles:[".container[_ngcontent-%COMP%]{margin:0 auto;min-width:30em;text-align:center;padding-top:10px}div.mat-dialog-actions[_ngcontent-%COMP%]{width:12em;margin:auto}.radioButton[_ngcontent-%COMP%]{text-align:left;margin-bottom:1em;padding-left:.2em}"]}),i})()}}]);